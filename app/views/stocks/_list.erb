<% if !@stocks.empty? %>
  <table class="table table-hover">
    <thead class="thead-dark">
    <tr>
      <th scope="col">Ticker</th>
      <th scope="col">Name</th>
      <th scope="col">Price</th>
      <th scope="col">Action</th>
    </tr>
    </thead>
    <tbody>
    <% @stocks.each do |s| %>
      <tr>
        <th scope="row"><%= s.ticker %></th>
        <td><%= s.name %></td>
        <td><%= s.last_price %></td>
        <td>
          <% if current_user == @user %>
            <%= link_to 'Remove', user_stock_path(s), method: :delete, data: {confirm: 'Are you sure?'}, class: 'btn btn-outline-danger' %>
          <% else %>
            <% if current_user.can_track_stock?(s.ticker) %>
              <%= link_to 'Add to portfolio', user_stocks_path(user: current_user, ticker: s.ticker),
                          class: 'btn btn-xs btn-primary ml-3', method: :post %>
            <% elsif current_user.stock_already_present?(s.ticker) %>
              <span class="badge badge-secondary">You're tracking this stock</span>
            <% end %>
          <% end %>
        </td>
      </tr>
    <% end %>
    </tbody>
  </table>
<% end %>
